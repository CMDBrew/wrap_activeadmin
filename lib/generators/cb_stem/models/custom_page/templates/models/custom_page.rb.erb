class <%= class_name %> < ApplicationRecord

  extend FriendlyId
  include Sluggable
  include SeoMeta

  acts_as_taggable
  friendly_id :slug_candidates, use: %i[slugged finders]

  before_validation :set_published_date

  scope :published, lambda {
    where('published = ? AND published_date <= ?', true, Time.zone.now)
  }
  scope :published_in, lambda { |date|
    where(published_date: date.beginning_of_month..date.end_of_month).
      by_published_date
  }

  private

  def set_published_date
    self.published_date = Time.zone.now unless published_date
  end

end
