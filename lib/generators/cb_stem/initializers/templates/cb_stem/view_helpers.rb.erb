# Extend ActiveAdmin ViewHelpers
module ActiveAdmin::ViewHelpers

  def menu_label(label, icon: nil, badge: 0)
    safe_join [
      aa_icon(icon),
      menu_title(label),
      menu_badge(badge)
    ]
  end

  def aa_icon(icon)
    return if icon.blank?
    content_tag(:i, '', class: "aa-icon-#{icon}")
  end

  def menu_title(label)
    content_tag(:span, class: 'menu-title') do
      content_tag(:span, label)
    end
  end

  def menu_badge(badge)
    return unless badge.is_a?(Integer) && badge.positive?
    badge = '99+' if badge > 99
    content_tag(:span, badge, class: 'aa-badge')
  end

end
