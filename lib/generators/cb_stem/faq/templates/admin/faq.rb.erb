ActiveAdmin.register <%= class_name %> do
  decorate_with Admin::<%= class_name %>Decorator

  config.sort_order = 'position_asc'

  permit_params :question, :answer, :members_only, :position, :<%= class_name.underscore %>_category_id,
                <%= class_name.underscore %>_category_attributes: %i[title]

  actions :all, except: %i[show]

  # INDEX
  filter :question
  filter :blog_category
  filter :position
  filter :updated_at

  index do
    selectable_column
    column 'Order', :position
    column :question, :question_with_link, sortable: 'question'
    column 'Last Update', :updated_at
    column 'Category', :<%= class_name.underscore %>_category
    actions
  end

  # FORM
  form do |f|
    columns do
      column span: 2 do
        f.inputs 'Basics' do
          f.input :question
          f.input :answer
        end
      end

      column do
        f.inputs 'Page' do
          f.input :position, label: 'Page Order'
          f.input :<%= class_name.underscore %>_category
        end
        f.inputs 'New Category', for: [:<%= class_name.underscore %>_category, <%= class_name %>Category.new] do |u|
          u.input :title
        end
      end
    end
    actions
  end
end
