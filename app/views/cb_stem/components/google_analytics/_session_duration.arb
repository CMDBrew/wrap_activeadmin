panel t('cb_stem.components.google_analytics.session.avg_duration') do
  result_hash = {}

  results =
    CbStem::GoogleAnalytics.results(
      property,
      start_date: start_date,
      end_date:   end_date
    )
  results.metrics << 'avgSessionDuration'

  value = results.first&.avgSessionDuration
  value = Time.at(value.to_i).utc.strftime('%H:%M:%S')

  if value.present?
    h1 value, class: 'display-1 mb-4'
  else
    cb_stem_component('charts/empty_state')
  end
end
